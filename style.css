/* --- NEUES LIGHT THEME SETUP --- */
:root {
    /* Mapping auf Tailwind Farben aus dem Zip */
    --bg: #f0f2f5;           /* background-light */
    --bg-elevated: #ffffff;  /* card-light */
    --border: #e5e7eb;       /* border-light */
    
    --accent: #ff5722;       /* Primary Orange */
    --accent-hover: #f4511e;
    
    --secondary: #00bcd4;    /* Secondary Cyan */
    --secondary-hover: #00acc1;

--text: #374151;         
    
    /* NEU: Extrafarbe für Überschriften (bleibt dunkel für Kontrast) */
    --text-heading: #111827; 
    
    /* Bleibt gleich (für sekundäre Infos) */
    --text-muted: #6b7280;
    
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    
    --radius-lg: 1rem;       /* Abgerundete Ecken wie im Design */
    --radius-md: 0.5rem;
    --transition: 0.2s ease;

    /* Status Farben angepasst für hellen Hintergrund */
    --status-success: #10b981;
    --status-success-rgb: 16, 185, 129;
    --status-error: #ef4444;
    --status-error-rgb: 239, 68, 68;
    --status-warning: #f59e0b;
    --status-warning-rgb: 245, 158, 11;
    --status-info: #3b82f6;
    --status-info-rgb: 59, 130, 246;

    /* Für script.js Bild-Verhältnisse */
    --gallery-item-aspect-ratio: 1 / 1; 
}

* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    background-color: var(--bg);
    color: var(--text);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 24px;
    min-height: 100vh;
}

/* Neuer App Container - Transparent, aber max-width behalten */
.app {
    width: 100%;
    max-width: 1240px;
    margin: 0 auto;
    background: transparent; 
    border: none;
    box-shadow: none;
    display: flex;
    flex-direction: column;
}

/* --- HEADER FIXES --- */

.app__header {
    padding: 0 0 24px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/* WICHTIG: Damit Icon und Text nebeneinander stehen */
.app__header-left {
    display: flex;
    align-items: center;
    gap: 16px; /* Abstand zwischen Menu-Icon und Titel */
}

/* Anpassung an das Design (text-2xl entspricht ca. 1.5rem) */
.app__header h1 {
    margin: 0;
    font-size: 1.5rem; /* War vorher größer (1.875rem) */
    font-weight: 700;
    color: var(--text);
    line-height: 1.2;
}

.fade-in {
    opacity: 0;
    transform: translateY(4px);
    transition: opacity 0.25s ease-out, transform 0.25s ease-out;
}
.fade-in.is-visible {
    opacity: 1;
    transform: translateY(0);
}

.app__logout {
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
    transition: color var(--transition);
}

.app__logout:hover,
.app__logout:focus-visible {
    color: var(--accent-hover);
}

.app__messages {
    padding: 0 40px 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* --- HEADER CARD --- */
.app__status-row {
    background: var(--bg-elevated); /* Weiß */
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    
    padding: 16px 24px;
    margin-bottom: 32px; /* Abstand zum Haupt-Grid darunter */
    
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 24px;
}

/* Den alten Margin vom Grid nehmen wir weg, da der Header jetzt Abstand hat */
.app__messages {
    margin-bottom: 24px;
}

.status-bar {
    flex: 1 1 auto;
    margin: 0;
    padding: 0.5rem 1rem;
    border-radius: 999px;
    font-size: 0.9rem;
    line-height: 1.4;
 /*   transition: background-color 0.15s ease, color 0.15s ease;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
 */  
    color: #ffffff;
}

.status-bar--active {
    min-height: 2.25rem;
    display: flex;
    align-items: center;
}

.status-bar--info {
    background: rgba(255, 255, 255, 0.08);
    color: #ffffff;
}

.status-bar--success {
    background: rgba(255, 255, 255, 0.08);
    color: #ffffff;
}

.status-bar--error {
    background: rgba(255, 255, 255, 0.08);
    color: #ffffff;
}

.app__status-row-button {
    flex: 0 0 auto;
    white-space: nowrap;
}

.app__message {
    padding: 14px 18px;
    border-radius: var(--radius-md);
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: rgba(24, 27, 34, 0.75);
    font-size: 0.95rem;
    line-height: 1.4;
}

.app__message--success {
    border-color: rgba(var(--status-success-rgb), 0.4);
    background: rgba(var(--status-success-rgb), 0.12);
}

.app__message--warning {
    border-color: rgba(var(--status-warning-rgb), 0.4);
    background: rgba(var(--status-warning-rgb), 0.12);
}

.app__message--error {
    border-color: rgba(var(--status-error-rgb), 0.4);
    background: rgba(var(--status-error-rgb), 0.12);
}

.app__message--info {
    border-color: rgba(var(--status-info-rgb), 0.4);
    background: rgba(var(--status-info-rgb), 0.12);
}

/* Das Menu-Icon (History Toggle) aufräumen */
.history-toggle {
    background: transparent;
    border: none;
    color: var(--text);
    padding: 8px;
    border-radius: var(--radius-md);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
    font-size: 1.5rem; /* Icon Größe passend zum Text */
}

.history-toggle:hover {
    background: rgba(0,0,0,0.05); /* Leichter Hover-Effekt */
}

/* --- SIDEBAR (Light Mode) --- */

.history-sidebar {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    width: 280px;
    max-width: min(320px, 90vw);
    
    /* Hintergrund: Weiß */
    background: #ffffff;
    /* Rahmen rechts: Hellgrau */
    border-right: 1px solid var(--border);
    /* Schatten: Sanft und hell */
    box-shadow: 4px 0 24px rgba(0, 0, 0, 0.05);
    
    transform: translateX(-100%);
    transition: transform var(--transition);
    z-index: 2000;
    display: flex;
    flex-direction: column;
}

.history-sidebar--open {
    transform: translateX(0);
}

/* Header der Sidebar */
.history-sidebar__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 24px;
    border-bottom: 1px solid var(--border); /* Hellgraue Linie */
}

.history-sidebar__header h2 {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text); /* Dunkler Text */
}

/* Schließen-Button */
.history-sidebar__close {
    background: transparent;
    border: none;
    color: var(--text-muted); /* Graues Icon */
    font-size: 1.5rem;
    line-height: 1;
    cursor: pointer;
    padding: 8px;
    border-radius: var(--radius-md);
    transition: all 0.2s;
}

.history-sidebar__close:hover {
    background: rgba(0, 0, 0, 0.05); /* Leichter Hover */
    color: var(--accent);
}

/* Liste der Verläufe */
.history-list {
    list-style: none;
    margin: 0;
    padding: 0;
    overflow-y: auto;
    flex: 1;
}

.history-list__item,
.history-list__empty {
    padding: 16px 24px;
    border-bottom: 1px solid var(--border);
    font-size: 0.95rem;
    color: var(--text);
}

.history-list__item {
    cursor: pointer;
    transition: background var(--transition), color var(--transition);
}

.history-list__item:hover {
    background: #f9fafb; /* Sehr helles Grau bei Hover */
}

/* Aktiver Eintrag */
.history-list__item--active {
    background: rgba(255, 87, 34, 0.08); /* Zartes Orange */
    color: var(--accent);
    font-weight: 500;
    border-left: 3px solid var(--accent); /* Optional: Akzent-Balken links */
}

.history-list__empty {
    color: var(--text-muted);
    font-style: italic;
    text-align: center;
    padding-top: 32px;
}

/* --- PROFIL SEKTION (Unten) --- */

.sidebar-profile {
    position: relative;
    margin-top: auto;
    padding: 16px 24px 24px;
    border-top: 1px solid var(--border);
    background: #ffffff;
}

/* Der Button mit Avatar & Name */
.sidebar-profile__trigger {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 12px;
    
    /* Clean Look: Kein Border im Normalzustand */
    border: 1px solid transparent;
    background: transparent;
    color: var(--text);
    
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.sidebar-profile__trigger:hover,
.sidebar-profile.open .sidebar-profile__trigger {
    background: #f3f4f6; /* Hellgrau */
    border-color: var(--border);
}

/* Avatar Kreis */
.sidebar-profile__avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Wir behalten den Gradient, das sieht modern aus */
    background: linear-gradient(135deg, #ffcc80 0%, #ffab91 100%); /* Warmes Orange/Peach passend zum Theme */
    color: #4a2c2a; /* Dunkle Schrift für Kontrast im Avatar */
    font-weight: 700;
    font-size: 0.9rem;
}

.sidebar-profile__info {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    min-width: 0;
    flex: 1;
}

.sidebar-profile__name {
    font-weight: 600;
    font-size: 0.9rem;
    color: var(--text);
}

.sidebar-profile__caret {
    color: var(--text-muted);
    transition: transform 0.2s;
}

.sidebar-profile.open .sidebar-profile__caret {
    transform: rotate(180deg);
    color: var(--accent);
}

/* --- DROPDOWN MENÜ (Einstellungen / Logout) --- */

.sidebar-profile-menu {
    position: absolute;
    left: 16px;
    right: 16px;
    bottom: calc(100% + 8px); /* Über dem Profil */
    padding: 6px;
    
    /* Weiße Karte */
    background: #ffffff;
    border: 1px solid var(--border);
    border-radius: 12px;
    /* Box Shadow nach oben gerichtet */
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
    
    display: flex;
    flex-direction: column;
    gap: 2px;
    
    opacity: 0;
    pointer-events: none;
    transform: translateY(10px);
    transition: all 0.2s ease;
    z-index: 2100;
}

.sidebar-profile.open .sidebar-profile-menu {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

/* Menü-Einträge */
.profile-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 8px;
    color: var(--text);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
    transition: background 0.2s, color 0.2s;
}

.profile-item:hover {
    background: #f3f4f6;
    color: var(--accent);
}

/* Logout Rot färben beim Hover */
.profile-item--danger:hover {
    background: #fef2f2; /* Sehr helles Rot */
    color: var(--status-error);
}

/* --- NEUES GRID & CARD LAYOUT --- */
.grid {
    display: grid;
    grid-template-columns: 1fr; /* Mobile First */
    gap: 32px;
    padding: 0; /* Padding vom Grid nehmen, da Body es hat */
    align-items: start;
}

/* Desktop: 3 Spalten Layout (1 Spalte Upload, 2 Spalten Ergebnis) */
@media (min-width: 1024px) {
    .grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* --- PANEL RESET & SPECIFICS --- */

/* Basis Card Style gilt weiter für Upload (Links) */
.panel {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 24px;
    box-shadow: var(--shadow-sm);
    display: flex;
    flex-direction: column;
    gap: 24px;
}

/* WICHTIG: Die rechte Seite (.panel--details) wird transparent! */
.panel--details {
    background: transparent;
    border: none;
    box-shadow: none;
    padding: 0;
    gap: 32px; /* Abstand zwischen den 3 inneren Cards */
}

@media (min-width: 1024px) {
    .panel--details {
        grid-column: span 2;
    }
}

.panel__section {
    padding: 0; /* Inneres Padding entfernen, da Panel es jetzt hat */
}



/* --- NEUE BUTTONS (Flat Design) --- */
.btn {
    background-color: var(--secondary); /* Cyan */
    color: white;
    border: none;
    border-radius: 0.5rem;
    padding: 0.5rem 1rem;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: opacity 0.2s;
}
.btn:hover {
    background-color: var(--secondary-hover);
    transform: none; /* Alte Transformation entfernen */
    opacity: 0.9;
}

/* Der Workflow Start Button (Orange) */
#start-workflow-btn, .btn-primary {
    background: var(--accent); /* Orange */
    color: white;
    border: none;
    border-radius: 0.5rem;
    padding: 0.5rem 1rem;
    font-weight: 500;
    box-shadow: var(--shadow-sm);
}
#start-workflow-btn:hover, .btn-primary:hover {
    background: var(--accent-hover);
    transform: none;
    opacity: 0.9;
}
/* Disabled State schöner machen */
button:disabled,
.btn:disabled,
.btn[aria-disabled="true"] {
    background-color: #e5e7eb !important; /* Helles Grau */
    color: #9ca3af !important; /* Dunkleres Grau für Text */
    cursor: not-allowed;
    opacity: 1; /* Opacity resetten, Farbe regelt das */
    transform: none !important;
    box-shadow: none !important;
}

/* Wenn aktiv (wird durch JS gesteuert, indem disabled entfernt wird) */
#start-workflow-btn:not(:disabled) {
    background-color: var(--accent); /* Orange */
    color: white;
}

.btn--secondary {
    background: rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.18);
    color: var(--text);
}

.btn--secondary:hover,
.btn--secondary:focus-visible {
    background: rgba(255, 255, 255, 0.14);
    border-color: rgba(255, 255, 255, 0.28);
}

.preview-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 1.5rem;
}

.original-image-wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: flex-start;
    gap: 1rem;
    margin-top: 1rem;
    margin-bottom: 1.5rem;
}

.original-image-wrapper img.original-image-preview {
    display: block;
    width: auto;
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.15);
    transition: transform 0.2s ease-in-out;
}

.original-image-wrapper.single img.original-image-preview {
    max-width: 300px;
}

.original-image-wrapper.multi img.original-image-preview {
    flex: 1 1 45%;
    max-width: 130px;
}

.original-image-wrapper.multi img.original-image-preview:hover {
    transform: scale(1.05);
}

@media (max-width: 600px) {
    .original-image-wrapper.multi img.original-image-preview {
        flex: 1 1 100%;
        max-width: 100%;
    }
}

.preview-item {
    position: relative;
    overflow: hidden;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.06);
    background: rgba(12, 14, 19, 0.7);
    cursor: pointer;
    transition: transform var(--transition), box-shadow var(--transition);
}

.preview-item__media {
    position: relative;
    display: block;
    width: 100%;
    height: 100%;
}

.scan-overlay {
    position: absolute;
    left: 0;
    width: 100%;
    height: 30px;
    top: 0;
    pointer-events: none;
    background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.1) 0%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0.1) 100%
    );
    animation: scan-move 2s ease-in-out infinite;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.scan-overlay.active {
    opacity: 1;
}

@keyframes scan-move {
    0% {
        top: 0;
    }
    50% {
        top: calc(100% - 30px);
    }
    100% {
        top: 0;
    }
}

.preview-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.preview-item:hover {
    transform: translateY(-4px) scale(1.01);
    box-shadow: 0 18px 30px rgba(0, 0, 0, 0.25);
}


#workflow-output {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    height: auto;
    max-height: none;
    background: transparent;
    border-radius: 0;
}

.workflow-output {
    display: flex;
    flex-direction: column;
    opacity: 1;
    visibility: visible;
    transition: opacity var(--transition);
}

.workflow-output .field-group {
    margin-bottom: 0;
}

.workflow-output.is-running,
.workflow-output.is-complete {
    opacity: 1;
    visibility: visible;
}

/* --- FIX: Keine Transparenz im Idle-State --- */
.workflow-output.is-idle .workflow-body {
    opacity: 1; /* Volle Sichtbarkeit */
    filter: none;
    /* pointer-events: none;  <-- Optional: Kannst du drin lassen, wenn man nicht klicken soll */
    transition: opacity 0.2s ease;
}

/* Damit die 3 Cards untereinander Abstand haben */
.workflow-body {
    display: flex;
    flex-direction: column;
    gap: 32px; /* Abstand zwischen Grid-Card, Titel-Card und Text-Card */
    padding: 0;
}

.status-bar {
    /* ...alte styles behalten oder anpassen... */
    color: var(--text-muted); /* Grau statt Weiß */
    background: transparent;
    border: none;
}
/* Wenn aktiv, geben wir ihr vielleicht einen leichten Hintergrund */
.status-bar--active {
    background: rgba(0,0,0,0.05);
    color: var(--text);
}

#start-workflow-btn {
    display: inline-block !important;
    visibility: visible !important;
    opacity: 1 !important;
    background: rgb(65, 90, 245);
    color: white;
    font-weight: 500;
    border-radius: 8px;
    padding: 0.6rem 1.2rem;
    cursor: pointer;
    transition: background 0.25s ease;
    border: none;
}

#start-workflow-btn:hover {
    background: rgb(75, 100, 255);
}

.workflow-body::-webkit-scrollbar {
    width: 6px;
}

.workflow-body::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.15);
    border-radius: 6px;
}

/* 1. Karte: Das Bilder-Grid */
.generated-grid {
    /* Jetzt machen wir das Grid zur Card */
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    padding: 24px;
    
    /* Grid Layout beibehalten */
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    width: 100%;
}
 

/* Shadow nur bei echtem Content aktivieren */
.generated-slot.has-shadow {
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.22);
}

.generated-slot.is-hidden {
    opacity: 0;
    pointer-events: none;
}

.generated-slot.first-active {
    opacity: 1;
}

.generated-slot:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 4px;
}

.generated-slot.has-image.has-shadow:hover {
    transform: translateY(-4px);
    box-shadow: 0 18px 36px rgba(0, 0, 0, 0.32);
    border-color: var(--accent);
}

.render-shell {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Der innere Container für Ladeanimationen */
.render-box {
    width: 100%;
    height: 100%;
    background-color: transparent; 
}

/* Ladeanimation: Muss heller sein! */
@keyframes preload-light {
    0%, 100% { background-color: #f3f4f6; }
    50% { background-color: #e5e7eb; }
}

.generated-slot.has-image .render-box {
    background-color: transparent;
}

.generated-slot.preload .render-box,
.render-box.preload {
    animation: preload-light 1.5s ease-in-out infinite;
}

.generated-slot.has-image .render-shell {
    display: none;
}

.generated-slot img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 12px;
    display: block;
}

.generated-slot img,
.render-box {
    transition: all 0.4s ease;
}

@keyframes preload {
    0%,
    100% {
        background-color: RGB(67, 76, 94);
    }
    45% {
        background-color: RGB(46, 52, 64);
    }
}

@media (max-width: 1024px) {
    .generated-grid {
        flex-direction: column;
    }

    .generated-slot {
        flex: 1 1 auto;
        width: 100%;
    }
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* 2. & 3. Karte: Titel und Beschreibung */
.field-group {
    /* Auch diese Gruppen werden zu eigenständigen Cards */
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    padding: 24px;
    
    /* Reset der alten Trennlinien */
    margin-bottom: 0;
    border-bottom: none;
}

#article-name-group {
  /*  margin-bottom: 1.35rem;*/
}

#article-description-group {
    margin-bottom: 1.6rem;
}

.field-group .field-content {
    width: 100%;
}

.output-panel {
    background: transparent; /* Kein Hintergrund mehr nötig, oder sehr leicht */
    border: none;
    border-radius: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0;
    margin-top:0;
}

.output-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    padding: 0;
}

.output-title {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 600;
    color: var(--text-muted); /* Grau */
}

/* Der "Kopieren" Button als kleiner Badge */
.output-copy {
    background: rgba(255, 87, 34, 0.1); /* Orange Transparent */
    color: var(--accent);
    border: none;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 4px 12px;
    cursor: pointer;
    transition: background 0.2s;
}
.output-copy:hover {
    background: rgba(255, 87, 34, 0.2);
}

.output-body {
    font-family: 'Inter', sans-serif; /* Keine Monospace mehr */
    font-size: 1rem;
    line-height: 1.6;
    color: var(--text); /* Dunkler Text */
    background: transparent;
    padding: 0;
    min-height: auto;
    white-space: pre-wrap;
}

/* --- SKELETON LOADER FIX --- */

.skeleton-text {
    display: none; /* Standardmäßig aus */
    flex-direction: column;
    gap: 12px;
    width: 100%;
    padding-top: 8px;
}

/* Wenn die Gruppe lädt, Content verstecken und Skeleton zeigen */
.field-group.is-loading .field-content {
    display: none;
}

.field-group.is-loading .skeleton-text,
.is-loading .skeleton-text {
    display: flex;
}

.skeleton-line {
    height: 14px;
    background-color: #e5e7eb; /* Hellgrau */
    border-radius: 4px;
    width: 100%;
    
    /* WICHTIG: Das hier hat gefehlt! */
    position: relative; 
    overflow: hidden; /* Schneidet den Schimmer ab, wenn er rausläuft */
}

/* Unterschiedliche Längen für Text-Optik */
.skeleton-line.short { width: 95%; }
.skeleton-line.shorter { width: 58%; }
.skeleton-line.long { width: 90%; }
.skeleton-line.medium { width: 75%; }

/* Der Schimmer-Effekt */
.skeleton-line::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%; /* Startet links außerhalb */
    width: 100%; /* Breite des Schimmers */
    height: 100%;
    
    /* Verlauf für Light Mode optimiert (Weißer Schimmer auf grauem Grund) */
    background: linear-gradient(
        90deg, 
        transparent 0%, 
        rgba(255, 255, 255, 0.8) 50%, /* 0.8 Deckkraft damit man es auf hellgrau sieht */
        transparent 100%
    );
    animation: none;
}

/* Die Animation läuft nur, wenn script.js .skeleton-shine setzt */
.skeleton-text.skeleton-shine .skeleton-line::after {
    animation: skeleton-shine 1.5s infinite ease-in-out;
}

@keyframes skeleton-shine {
    0% { left: -100%; }
    100% { left: 100%; }
}

.field-group.is-loading .field-content {
    display: none;
}

.field-group.is-loading .skeleton-text {
    display: flex;
}

.is-loading .skeleton-text {
    display: flex;
}

label {
    font-size: 0.95rem;
    color: var(--text-muted);
    letter-spacing: 0.02em;
}

input[type="text"],
input[type="email"],
input[type="password"],
textarea {
    background: rgba(15, 17, 22, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 14px;
    color: var(--text);
    padding: 14px 16px;
    font-size: 1rem;
    transition: border-color var(--transition), box-shadow var(--transition);
}

input[type="text"]:focus,
input[type="email"]:focus,
input[type="password"]:focus,
textarea:focus {
    border-color: var(--accent);
    outline: none;
    box-shadow: 0 0 0 3px rgba(79, 140, 255, 0.25);
}

textarea {
    resize: vertical;
    min-height: 140px;
}

.form-actions {
    display: flex;
    justify-content: flex-end;
}

.form-actions--stacked {
    justify-content: stretch;
}

.form-actions--stacked .btn {
    width: 100%;
}

.input-help {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.auth-card {
    /* 1. Karte muss WEISS sein */
    background-color: #ffffff; 
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    
    /* 2. Zentrierung & Größe */
    width: 100%;
    max-width: 440px;
    margin: 8vh auto; /* Etwas Abstand von oben, horizontal zentriert */
    
    /* 3. Schatten für den "Schwebe"-Effekt */
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
    
    padding: 40px;
    display: flex;
    flex-direction: column;
    gap: 24px;
}

/* Header Text (Willkommen zurück) */
.auth-card__header {
    text-align: center;
}

.auth-card__header h1 {
    color: var(--text-heading); /* Dunkles Grau/Schwarz */
    font-size: 1.75rem;
    font-weight: 700;
    margin-bottom: 12px;
}

.auth-card__header p {
    color: var(--text-muted); /* Mittelgrau */
    font-size: 1rem;
    margin: 0;
}

/* Inputs explizit hell machen (überschreibt alte Dark-Mode Styles) */
.auth-form input[type="text"],
.auth-form input[type="email"],
.auth-form input[type="password"] {
    background-color: #ffffff !important;
    border: 1px solid var(--border) !important;
    color: var(--text) !important;
    padding: 12px;
    border-radius: var(--radius-md);
}

.auth-form label {
    color: var(--text-heading);
    font-weight: 500;
    margin-bottom: 6px;
    display: block;
}

/* Der Button muss ORANGE sein (Primary) */
.auth-form .btn {
    background-color: var(--accent); /* Orange */
    color: #ffffff;
    width: 100%; /* Volle Breite */
    padding: 12px;
    font-size: 1rem;
    font-weight: 600;
    margin-top: 12px;
    justify-content: center;
}

.auth-form .btn:hover {
    background-color: var(--accent-hover);
}

/* Footer Links */
.auth-card__footer {
    text-align: center;
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-top: 8px;
}

.auth-card__footer a {
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
    margin: 0 5px;
}

.auth-card__footer a:hover {
    text-decoration: underline;
}

.auth-messages {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.auth-message {
    padding: 14px 16px;
    border-radius: var(--radius-md);
    font-size: 0.95rem;
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: rgba(24, 27, 34, 0.85);
}

.auth-message--success {
    border-color: rgba(var(--status-success-rgb), 0.45);
    background: rgba(var(--status-success-rgb), 0.15);
}

.auth-message--warning {
    border-color: rgba(var(--status-warning-rgb), 0.45);
    background: rgba(var(--status-warning-rgb), 0.15);
}

.auth-message--error {
    border-color: rgba(var(--status-error-rgb), 0.45);
    background: rgba(var(--status-error-rgb), 0.15);
}

.auth-message--info {
    border-color: rgba(var(--status-info-rgb), 0.45);
    background: rgba(var(--status-info-rgb), 0.15);
}

@media (max-width: 640px) {
    body {
        padding: 24px;
    }

    .auth-card {
        padding: 28px 24px;
    }
}

.lightbox {
    position: fixed;
    inset: 0;
    background: rgba(5, 7, 11, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s ease;
    z-index: 1000;
}

.lightbox.open {
    opacity: 1;
    pointer-events: auto;
}

.lightbox__image {
    max-width: min(80vw, 900px);
    max-height: 80vh;
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.12);
    box-shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
}

.lightbox__close {
    position: absolute;
    top: 40px;
    right: 50px;
    background: none;
    border: none;
    color: var(--text);
    font-size: 2.4rem;
    cursor: pointer;
    padding: 0;
    line-height: 1;
    transition: transform var(--transition), color var(--transition);
}

.lightbox__close:hover,
.lightbox__close:focus-visible {
    color: var(--accent);
    transform: scale(1.1);
}

@media (max-width: 1024px) {
    body {
        padding: 24px;
    }

    .grid {
        gap: 24px;
        padding: 24px;
    }

    .panel--upload,
    .panel--details {
        grid-column: span 12;
    }

    .gallery {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (max-width: 640px) {
    body {
        padding: 16px;
    }

    .app__header {
        padding: 24px;
    }

    .grid {
        padding: 20px;
    }

    .gallery {
        grid-template-columns: 1fr;
    }
}


/* --- LINKES PANEL AUFTEILEN (Dropzone & Preview getrennt) --- */

/* 1. Den großen Container unsichtbar machen (wie rechts) */
.panel--upload {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    display: flex !important;
    flex-direction: column;
    gap: 24px; /* Abstand zwischen Dropzone-Card und Preview-Card */
    height: auto !important; /* Höhe flexibel lassen */
}

 
/* 3. Der GESTRICHELTE Rahmen (jetzt als Pseudo-Element innen) */
/* Damit sieht es aus wie "Box in einer Box" wie im Design */
#drop-zone::before {
    content: "";
    position: absolute;
    inset: 16px; /* Abstand vom weißen Rand nach innen */
 /*   border: 2px dashed var(--border); /* Der gestrichelte Rahmen */
 /*   border-radius: var(--radius-md); */
    pointer-events: none; /* Klicks gehen durch */
    z-index: 0;
}

/* Sicherstellen, dass Text/Icon über dem gestrichelten Rahmen liegen */
#drop-zone > * {
    z-index: 1;
    position: relative;
}

/* Hover-Effekt auf den inneren Rahmen anwenden */
#drop-zone:hover::before,
#drop-zone:focus-within::before {
    border-color: var(--accent);
    background-color: rgba(255, 87, 34, 0.02);
}

#drop-zone:hover {
    border-color: var(--accent); /* Äußerer Rahmen auch färben (optional) */
}


/* 4. Die Bildvorschau als EIGENE Karte */
.original-image-wrapper {
    /* Weiße Karte Styles */
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    padding: 16px; /* Etwas kompakter */
    
    /* Layout Reset */
    width: 100%;
    margin: 0;
    
    /* Flexbox für das Bild darin */
    display: flex;
    justify-content: center;
    align-items: center;
    
    /* Animation beim Einblenden */
    transition: all 0.3s ease;
    margin-top:20px;
}

/* Wenn keine Bilder da sind, verstecken wir die Karte komplett */
.original-image-wrapper:empty {
    display: none;
}

/* Bild Styling innerhalb der neuen Karte */
.original-image-wrapper img.original-image-preview {
    max-width: 100%;
    border-radius: var(--radius-md);
    box-shadow: none; /* Schatten hat jetzt die Karte, nicht das Bild */
    border: 1px solid var(--border);
}



/* --- Generated Cards & Action Bar --- */

/* Der neue Wrapper für Bild + Leiste */
.generated-card {
    display: flex;
    flex-direction: column;
    gap: 12px; /* Abstand zwischen Bild und Leiste */
    /* Optional: Falls die ganze Karte wie ein Block wirken soll */
    /* background: white; padding: 12px; border-radius: 16px; border: 1px solid var(--border); box-shadow: var(--shadow); */
}

/* Anpassung des bestehenden Slots (Bild-Container) */
.generated-slot {
    /* Die Breite wird nun vom Grid der Card bestimmt */
    flex: 1 1 auto; 
    width: 100%;
    aspect-ratio: 1/ 1;
    border-radius: 12px;
    background: #f1f5f9;
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid transparent;
    transition: all var(--transition);
}

.generated-slot.has-image {
    background: #ffffff;
    box-shadow: var(--shadow);
    border: 1px solid rgba(0,0,0,0.05);
    cursor: pointer;
}

/* --- Action Bar (Die Menüleiste) --- */
.slot-actions {
    position: relative;
    background: #ffffff;
    border: 1px solid var(--border);
    border-radius: 8px; /* Leicht abgerundet */
    overflow: hidden; /* Damit die inneren Buttons nicht überstehen */
    height: 40px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.02);
    /* Leiste standardmäßig ausblenden und nur zeigen, wenn Bild da ist? */
    opacity: 0.6; /* Inaktiv, solange kein Bild da ist (optional) */
    transition: opacity 0.2s;
}

.slot-actions__buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    height: 100%;
    width: 100%;
}

.slot-actions__skeleton {
    position: absolute;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 8px 12px;
    background: #ffffff;
    pointer-events: none;
}

.slot-actions--skeleton .slot-actions__skeleton {
    display: flex; /* Skeleton-Menübar sichtbar, Buttons bleiben als Struktur erhalten. */
}

.slot-actions--skeleton {
    opacity: 1;
}

.slot-actions--skeleton .slot-actions__buttons {
    opacity: 0; /* Buttons bleiben für spätere JS-Hooks im Markup, aber visuell verborgen. */
    pointer-events: none;
}

.slot-actions__skeleton-line {
    height: 16px;
 
    min-width: 48px;
}

 

/* Wenn das Bild geladen ist (wir simulieren das über Hover oder JS Klasse später) */
.generated-card:hover .slot-actions,
.generated-slot.has-image ~ .slot-actions {
    opacity: 1;
}

.action-btn {
    background: transparent;
    border: none;
    border-right: 1px solid var(--border); /* Trennlinie rechts */
    color: var(--text-muted);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    padding: 0;
    margin: 0; /* Reset */
    height: 100%;
}

.action-btn:last-child {
    border-right: none; /* Letzter Button hat keine Linie rechts */
}

.action-btn:hover {
    background: var(--bg-hover);
    color: var(--text);
}

.action-btn span.material-icons-outlined {
    font-size: 18px; /* Icon Größe anpassen */
}

/* Anpassung des Grids im Layout */
.generated-grid {
    display: flex;
    flex-direction: row;
    gap: 24px;
    width: 100%;
    margin-bottom: 1rem;
}

.generated-card {
    flex: 1;
    min-width: 0; /* Verhindert Overflow in Flexbox */
}

@media (max-width: 768px) {
    .generated-grid {
        flex-direction: column;
    }
}

/* --- Action Bar Update --- */

/* 1. Der Play Button (Primary Color) */
.action-btn.btn-primary {
    color: var(--accent); /* Blau */
}

.action-btn.btn-primary:hover {
    background: #eff6ff; /* Ganz helles Blau beim Hover */
}

/* 2. Der "Active" State (Gedrückt) für die anderen Buttons */
.action-btn.is-active {
    background: #e2e8f0; /* Dunkleres Grau als Hintergrund */
    color: var(--text);  /* Dunkler Text */
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.06); /* "Inset" Schatten lässt es eingedrückt wirken */
    font-weight: 700;
}

/* Optional: Wenn ein Button aktiv ist, soll sich der Hover ändern */
.action-btn.is-active:hover {
    background: #cbd5e1; /* Noch etwas dunkler beim Hovern über aktiven Button */
}




/* --- Status Widget & Compact Dropzone --- */

/* 1. Status Widget Container */
.status-widget {
    background: #ffffff;
    border: 1px solid var(--border); 
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 24px;
    display: flex;
    flex-direction: column;
}

.status-header {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text);
    margin: 0 0 16px 0;
}

/* Die Liste mit Scrollbar Logik */
.status-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
    /* Höhe beschränken für ca. 5 Items, danach Scrollen */
    max-height: 280px; 
    overflow-y: auto;
    padding-right: 8px; 
}

/* Scrollbar Styling */
.status-list::-webkit-scrollbar {
    width: 4px;
}
.status-list::-webkit-scrollbar-track {
    background: transparent;
}
.status-list::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
}

/* Einzelnes Status Item */
.status-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
}

.status-item--animated {
    transition: transform 200ms ease-out, opacity 200ms ease-out;
}

.status-item--faded {
    opacity: 0;
}

.status-item--enter {
    opacity: 0;
    transform: translateY(-4px);
}

.status-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.status-text {
    font-size: 0.9rem;
    color: var(--text);
    margin: 0;
    font-weight: 500;
    line-height: 1.4;
}

.status-time {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin: 0;
}

/* Status Icons Colors */
.status-icon {
    font-size: 20px;
    margin-top: 2px;
}
/* Hier passen wir die Farben direkt an */
.text-success { color: var(--status-success); }
.text-info { color: var(--status-info); }
.text-error { color: var(--status-error); }


/* 2. Compact Drop Zone (Orange/Primary Style) */

.drop-zone.drop-zone--compact {
    background: var(--accent) !important;
    border: 2px dashed rgba(255, 255, 255, 0.4);
    padding: 24px;
    min-height: auto; 
    flex-direction: column;
    gap: 12px;
    color: white;
    border-radius: 12px;
    transition: all 0.2s;
    text-align: center;
    /* KORRIGIERT: Schatten passend zu Orange (RGB ca. 255, 87, 34) */
    box-shadow: 0 4px 12px rgba(255, 87, 34, 0.25); 
}

/* Hover Effekt */
.drop-zone.drop-zone--compact:hover,
.drop-zone.drop-zone--compact:focus {
    background: var(--accent-hover);
    border-color: rgba(255, 255, 255, 0.8);
    transform: translateY(-2px);
    /* KORRIGIERT: Hover-Schatten passend zu Orange */
    box-shadow: 0 8px 16px rgba(255, 87, 34, 0.35);
}

/* Drag Over Effekt */
.drop-zone.drop-zone--compact.dragover {
    background: var(--accent-hover);
    border-color: #ffffff;
    transform: scale(1.02);
}

/* Icon in der Dropzone */
.drop-zone--compact .drop-icon {
    font-size: 32px;
    color: white;
    margin: 0;
}

/* Text in der Dropzone */
.drop-zone--compact p {
    margin: 0;
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.95);
}

/* Der "Browse" Button Link */
.drop-zone--compact .link-btn {
    background: none;
    border: none;
    padding: 0;
    margin: 0;
    color: white;
    font-weight: 700;
    text-decoration: underline;
    text-underline-offset: 2px;
    cursor: pointer;
    font-size: inherit;
    display: inline;
}

.drop-zone--compact .link-btn:hover {
    color: white;
    text-decoration-thickness: 2px;
}

/* Verstecke den alten großen Button in dieser Ansicht */
.drop-zone--compact #select-file.btn {
    display: none; 
}
/* --- Status & Upload Combined Card --- */

/* 1. Die Haupt-Karte (Wrapper) */
.status-upload-card {
    background: #ffffff;
    border: 1px solid var(--border);
    border-radius: 16px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Damit Kind-Elemente nicht über runde Ecken ragen */
}

/* 2. Oberer Bereich: Status */
.status-area {
    padding: 24px 24px 0 24px; /* Unten kein Padding, das macht der Divider margin */
}

.status-header {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text);
    margin: 0 0 20px 0;
}

.status-list {
    display: flex;
    flex-direction: column;
    gap: 18px;
    height: 157px; /* Begrenzte Höhe */
    overflow-y: auto;
    padding-bottom: 24px; /* Abstand zur Trennlinie */
    padding-right: 4px;
}

/* Scrollbar Styles */
.status-list::-webkit-scrollbar { width: 4px; }
.status-list::-webkit-scrollbar-track { background: transparent; }
.status-list::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 4px; }

.status-item { display: flex; align-items: flex-start; gap: 14px; }
.status-item--animated {
    transition: transform 200ms ease-out, opacity 200ms ease-out;
}
.status-item--faded { opacity: 0; }
.status-item--enter { opacity: 0; transform: translateY(-4px); }
.status-content { display: flex; flex-direction: column; gap: 2px; }
.status-text { font-size: 0.9rem; font-weight: 500; color: var(--text); margin: 0; line-height: 1.3; }
.status-time { font-size: 0.75rem; color: var(--text-muted); margin: 0; }
.status-icon { font-size: 20px; margin-top: 1px; }

.text-success { color: var(--status-success); }
.text-info { color: var(--status-info); }
.text-error { color: var(--status-error); }

/* 3. Die Trennlinie */
.card-divider {
    height: 1px;
    background: var(--border);
    width: 100%;
    margin: 0;
}

/* 4. Unterer Bereich: Dropzone Container */
.drop-area {
    padding: 24px; /* Innenabstand für die Dropzone */
    background: #fff; /* Optional: Ganz leicht abgedunkelter Footer-Bereich? Oder weglassen für Weiß. */
}

/* Die Dropzone selbst (Orange CTA) */
.drop-zone.drop-zone--cta {
    width: 100%;
    min-height: 64px;
    padding: 16px 24px;
    
    display: flex;
    align-items: center;
    justify-content: center;
    
    /* Orange Style */
    background: var(--accent);
   
    border-radius: 12px;
    
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  
}

.drop-zone--cta .cta-content {
    display: flex;
    align-items: center;
    gap: 12px;
    pointer-events: none;
}

.drop-zone--cta .cta-icon {
    font-size: 24px;
    color: #ffffff;
}

.drop-zone--cta .cta-text {
    font-size: 1rem;
    font-weight: 600;
    color: #ffffff;
}

/* Hover States */
.drop-zone--cta:hover,
.drop-zone--cta:focus {
    background: var(--accent-hover);
    transform: translateY(-2px);
    box-shadow: 0 8px 15px rgba(255, 87, 34, 0.3);
    border-color: rgba(255, 255, 255, 0.8);
}

.drop-zone--cta.dragover {
    background: var(--accent-hover);
    border-color: #ffffff;
    transform: scale(1.02);
}

 